{
	"info": {
		"_postman_id": "lms-api-collection",
		"name": "LMS Backend API",
		"description": "Complete API collection for Learning Management System Backend with RBAC, Audit Logging, and Rate Limiting",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "login"]
						}
					}
				},
				{
					"name": "Register",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"newuser@example.com\",\n  \"password\": \"password123\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"profileTypeId\": 2,\n  \"organizationId\": \"{{organization_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/register",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "register"]
						}
					}
				},
				{
					"name": "Refresh Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"refreshToken\": \"{{refresh_token}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/refresh",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "refresh"]
						}
					}
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/auth/logout",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "logout"]
						}
					}
				}
			]
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "Get All Users",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users?page=0&size=10",
							"host": ["{{base_url}}"],
							"path": ["api", "users"],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "10"
								}
							]
						}
					}
				},
				{
					"name": "Get User by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users/{{user_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "{{user_id}}"]
						}
					}
				},
				{
					"name": "Create User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"teacher@example.com\",\n  \"password\": \"password123\",\n  \"firstName\": \"Jane\",\n  \"lastName\": \"Smith\",\n  \"profileTypeId\": 1,\n  \"organizationId\": \"{{organization_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users",
							"host": ["{{base_url}}"],
							"path": ["api", "users"]
						}
					}
				},
				{
					"name": "Update User",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"firstName\": \"Updated Name\",\n  \"lastName\": \"Updated Last\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/users/{{user_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "{{user_id}}"]
						}
					}
				},
				{
					"name": "Delete User",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/users/{{user_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "users", "{{user_id}}"]
						}
					}
				}
			]
		},
		{
			"name": "RBAC - Roles",
			"item": [
				{
					"name": "Get All Roles",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/rbac/roles",
							"host": ["{{base_url}}"],
							"path": ["api", "rbac", "roles"]
						}
					}
				},
				{
					"name": "Get Role by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/rbac/roles/{{role_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "rbac", "roles", "{{role_id}}"]
						}
					}
				},
				{
					"name": "Create Role",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Course Manager\",\n  \"description\": \"Can manage courses and assignments\",\n  \"permissionIds\": [\"{{permission_id_1}}\", \"{{permission_id_2}}\"]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/rbac/roles",
							"host": ["{{base_url}}"],
							"path": ["api", "rbac", "roles"]
						}
					}
				},
				{
					"name": "Update Role",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Course Manager\",\n  \"description\": \"Updated description\",\n  \"permissionIds\": [\"{{permission_id_1}}\", \"{{permission_id_2}}\", \"{{permission_id_3}}\"]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/rbac/roles/{{role_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "rbac", "roles", "{{role_id}}"]
						}
					}
				},
				{
					"name": "Delete Role",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/rbac/roles/{{role_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "rbac", "roles", "{{role_id}}"]
						}
					}
				}
			]
		},
		{
			"name": "RBAC - Permissions",
			"item": [
				{
					"name": "Get All Permissions",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/rbac/permissions",
							"host": ["{{base_url}}"],
							"path": ["api", "rbac", "permissions"]
						}
					}
				},
				{
					"name": "Get Permissions by Resource",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/rbac/permissions/resource/USER",
							"host": ["{{base_url}}"],
							"path": ["api", "rbac", "permissions", "resource", "USER"]
						}
					}
				},
				{
					"name": "Create Permission",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"user_read\",\n  \"description\": \"Can read user information\",\n  \"resource\": \"USER\",\n  \"action\": \"READ\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/rbac/permissions",
							"host": ["{{base_url}}"],
							"path": ["api", "rbac", "permissions"]
						}
					}
				},
				{
					"name": "Delete Permission",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/rbac/permissions/{{permission_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "rbac", "permissions", "{{permission_id}}"]
						}
					}
				}
			]
		},
		{
			"name": "RBAC - User Roles",
			"item": [
				{
					"name": "Get User Roles",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/rbac/users/{{user_id}}/roles",
							"host": ["{{base_url}}"],
							"path": ["api", "rbac", "users", "{{user_id}}", "roles"]
						}
					}
				},
				{
					"name": "Assign Role to User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"roleId\": \"{{role_id}}\",\n  \"assignedBy\": \"{{current_user_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/rbac/users/{{user_id}}/roles",
							"host": ["{{base_url}}"],
							"path": ["api", "rbac", "users", "{{user_id}}", "roles"]
						}
					}
				},
				{
					"name": "Remove Role from User",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/rbac/users/{{user_id}}/roles/{{role_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "rbac", "users", "{{user_id}}", "roles", "{{role_id}}"]
						}
					}
				},
				{
					"name": "Check User Permission",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/rbac/users/{{user_id}}/permissions?resource=USER&action=READ",
							"host": ["{{base_url}}"],
							"path": ["api", "rbac", "users", "{{user_id}}", "permissions"],
							"query": [
								{
									"key": "resource",
									"value": "USER"
								},
								{
									"key": "action",
									"value": "READ"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "Audit Logs",
			"item": [
				{
					"name": "Get User Activity",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/audit/users/{{user_id}}?page=0&size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "audit", "users", "{{user_id}}"],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "20"
								}
							]
						}
					}
				},
				{
					"name": "Get Resource Activity",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/audit/resources/USER/{{user_id}}?page=0&size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "audit", "resources", "USER", "{{user_id}}"],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "20"
								}
							]
						}
					}
				},
				{
					"name": "Get Activity by Action",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/audit/actions/CREATE?page=0&size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "audit", "actions", "CREATE"],
							"query": [
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "20"
								}
							]
						}
					}
				},
				{
					"name": "Get Activity by Time Range",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/audit/timerange?start=2024-01-01T00:00:00&end=2024-12-31T23:59:59&page=0&size=20",
							"host": ["{{base_url}}"],
							"path": ["api", "audit", "timerange"],
							"query": [
								{
									"key": "start",
									"value": "2024-01-01T00:00:00"
								},
								{
									"key": "end",
									"value": "2024-12-31T23:59:59"
								},
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "20"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "Rate Limiting",
			"item": [
				{
					"name": "Get Login Attempts by Email",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/rate-limit/attempts/email/test@example.com?since=2024-01-01T00:00:00",
							"host": ["{{base_url}}"],
							"path": ["api", "rate-limit", "attempts", "email", "test@example.com"],
							"query": [
								{
									"key": "since",
									"value": "2024-01-01T00:00:00"
								}
							]
						}
					}
				},
				{
					"name": "Get Login Attempts by IP",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/rate-limit/attempts/ip/192.168.1.1?since=2024-01-01T00:00:00",
							"host": ["{{base_url}}"],
							"path": ["api", "rate-limit", "attempts", "ip", "192.168.1.1"],
							"query": [
								{
									"key": "since",
									"value": "2024-01-01T00:00:00"
								}
							]
						}
					}
				},
				{
					"name": "Clear Rate Limit Buckets",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/rate-limit/clear",
							"host": ["{{base_url}}"],
							"path": ["api", "rate-limit", "clear"]
						}
					}
				}
			]
		},
		{
			"name": "Organizations",
			"item": [
				{
					"name": "Get All Organizations",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/organizations",
							"host": ["{{base_url}}"],
							"path": ["api", "organizations"]
						}
					}
				},
				{
					"name": "Get Organization by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/organizations/{{organization_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "organizations", "{{organization_id}}"]
						}
					}
				},
				{
					"name": "Create Organization",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"New Organization\",\n  \"brandId\": \"{{brand_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/organizations",
							"host": ["{{base_url}}"],
							"path": ["api", "organizations"]
						}
					}
				}
			]
		},
		{
			"name": "Classrooms",
			"item": [
				{
					"name": "Get All Classrooms",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/classrooms",
							"host": ["{{base_url}}"],
							"path": ["api", "classrooms"]
						}
					}
				},
				{
					"name": "Get Classroom by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/classrooms/{{classroom_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "classrooms", "{{classroom_id}}"]
						}
					}
				},
				{
					"name": "Create Classroom",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Class 10A\",\n  \"organizationId\": \"{{organization_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/classrooms",
							"host": ["{{base_url}}"],
							"path": ["api", "classrooms"]
						}
					}
				}
			]
		},
		{
			"name": "Courses",
			"item": [
				{
					"name": "Get All Courses",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/courses",
							"host": ["{{base_url}}"],
							"path": ["api", "courses"]
						}
					}
				},
				{
					"name": "Get Course by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/courses/{{course_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "courses", "{{course_id}}"]
						}
					}
				},
				{
					"name": "Create Course",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Mathematics 101\",\n  \"organizationId\": \"{{organization_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/courses",
							"host": ["{{base_url}}"],
							"path": ["api", "courses"]
						}
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		},
		{
			"key": "access_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "refresh_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "organization_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "classroom_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "course_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "role_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "permission_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "permission_id_1",
			"value": "",
			"type": "string"
		},
		{
			"key": "permission_id_2",
			"value": "",
			"type": "string"
		},
		{
			"key": "permission_id_3",
			"value": "",
			"type": "string"
		},
		{
			"key": "brand_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "current_user_id",
			"value": "",
			"type": "string"
		}
	]
}
